\apendice{Plan de Proyecto Software}

\section{Introducción}

Antes de profundizar en el desarrollo del proyecto es importante mencionar las circunstancias exteriores que rodean a este trabajo. El trabajo se comenzó a desarrollar en Marzo, ya avanzado el curso, por motivos de trabajo. A esto se le añade que al poco de comenzar, el COVID-19 llegó a nuestro país y puso todo patas arriba, haciendo que las comunicaciones con las partes interesadas en la aplicación fueran muy complicadas, hasta que todo se empezó a estabilizar un poco. 


\section{Planificación temporal}

Contando con todos lo problemas que se tuvieron desde el principio, se optó por utilizar una metodología ágil basada en la programación extrema. La programación extrema se diferencia de otras principalmente en que pone más énfasis en la adaptabilidad que en la previsibilidad, así que teniendo en cuenta todos los factores que nos rodeaban, optamos por esta.

Semanalmente se realizaban entre una y dos reuniones con el tutor, para establecer requisitos y objetivos (sobre todo al principio) y resolver posibles dudas. En estas reuniones se establecía un objetivo basado en las circunstancias generalmente, para la semana siguiente. 

Cada semana se realizaba un commit con los cambios realizados, y se actualizaba un archivo de documentación temporal, en el que quedan anotados todos los pasos que se han ido realizando.

No obstante, todo el ciclo del proyecto se puede dividir en diferentes etapas que se definirán a continuación.

\subsection{Planificación y formación}

La primera parte del proceso que lleno prácticamente un mes de trabajo, consistió en la planificación inicial del proyecto. Se investigaron las posibles herramientas que se podrían utilizar, y se decidió cuáles eran las que se iban a utilizar. La aplicación se desarrollaría en lenguaje java con Eclipse, usando JSP y utilizando Maven para la configuración. Esta elección se tomó en base a los conocimientos que ya se tenían sobre el programa y sobre el lenguaje, adquiridos a lo largo de la carrera. La base de datos se pasaría de SQL Server a MySQL ya que tiene una licencia de código abierto y tiene una integración sencilla y funcional con Java y Eclipse.

Luego se comenzó un proceso de autoformación, en el para empezar que se estudió todo el comportamiento de la aplicación ya existente, así como luego se estudió el funcionamiento de todas las herramientas que se iban a utilizar, realizando pruebas y estudiando sus documentaciones.

Por los motivos ya mencionados previamente, esta fase se alargo más de lo que se esperaba, quedando a la espera de los materiales necesarios, por lo que se dedico aprovechar el tiempo con videotutoriales y cursos.


Se realizaron pruebas en Eclipse usando Maven, y siguiendo un tutorial en Udemy para refrescar los conocimientos \cite{curso:JSPin25Steps}.

Para conectar Java con MySQL, se encontró un videotutorial que solucionó algunas dudas sobre su configuración \cite{tutorial:javaMySQL}


\subsection{Importación y adaptación}

Cuando finalmente recibimos la información del servidor, lo recibimos en un formato de imagen de disco proveniente de Ghost Norton en formato VHD. Esto nos dejaba con una copia del disco duro en el que estaban las tablas que necesitábamos.
Para montar la imagen utilizamos Virtual Vox NT4, pero por alguna razón la maquina no arrancaba. Tras muchas pruebas encontramos que la causa era la tarjeta de red, no era compatible. Tras esto se realizó una búsqueda de una compatible. Finalmente se utilizó AMD PC net family. 

Con todo listo se pudo ejecutar la imagen, y a través de admin SQL exportamos los datos que necesitábamos.

Una vez obtenidas las tablas extraidas, se realizó la instalación de MYSQL descagando el software de su página oficial. Desde la página buscaremos el "MySQL Comunnity Server" y después seleccionar la plataforma en la que lo vamos a instalar.

Una vez tengamos el ejecutable solo hay que abrirlo y seleccionar el modo de instalación. En mi caso se seleccionó "Developer Default" ya que se quería instalar tanto MySQL Server como MySql Workbech, un software que proporciona diversas opciones de administraciónde de bases de datos relacionales así como herramientas que nos permiten utilizar consultas SQL mediante un entorno visual.

\subsection{Requisitos funcionales}

La tarea de recoger unos nuevos requisitos funcionales claros fue complicada. Con todo lo sucedido por el confinamiento, las reuniones entre los usuarios de la aplicación fueron imposibles. debido a ello, la única manera de comunicarse fue a través de una serie de correos que los propios usuarios enviaron a Gonzalo. Pedro Renedo recopiló esos correos y me los envío a mi.

En los correos la información era poco específica y caótica, por lo que hizo falta realizar una tarea de análisis para poder extraer unos requisitos funcionales claros. 

Tras esta tarea de análisis e investigación tanto de la aplicación como de conceptos de química utilizados, se extrajeron unas historias de usuario a medio completar, con el objetivo de que o bien Gonzalo, o bien los usuarios, aportaran más información, y sobre todo información más específica. 

Al no recibir respuesta por parte de la universidad (de nuevo por razones del confinamiento) se decidió investigar los requisitos por cuenta propia y establecer unos requisitos temporales para poder ir trabajando sobre ellos. Los requisitos finalmente elegidos no eran definitivos y quedaban abiertos a posibles cambios en el futuro.


\subsection{Diseño de la aplicación}

Para realizar el diseño de la aplicación se comenzó por crear un logotipo, elegir unos colores y una tipografía. Con todo ello, se creo un primer prototipo de la página de inicio (login). Para la creación tanto del logotipo como del primer diseño de la página de login se ha utilizado la herramienta Illustrator. 

Con un diseño gráfico ya establecido, se creó inicialmente la página de login utilizando bootstrap. Inicialmente solo se implementó la parte gráfica de la aplicación, sirviendo a modo de "práctica" en la utilización de bootstrap. Para ello se realizó una formación en bootstrap a través de la documentación de su página web, y de diversos tutoriales de los que disponen \cite{doc:Bootstrap4}.

Se descargaron todos los archivos pertinentes (css's y javascripts) y se importaron en el proyecto. Para trasladar el diseño creado en illustrator, se ha utilizado una herramienta intermedia llamada Figma.

Con el proyecto ya más avanzado, se creó todo el diseño gráfico del resto de ventanas a utilizar. También se refactorizó el código CSS para ajustarse a una metodología BEM, con el fin de mejorar su legibilidad y reutilización.

También se añadió una libreria javascript llamada "animation.js". Esta librería es una biblioteca de animación JavaScript que funciona con propiedades CSS, transformaciones CSS individuales, SVG o cualquier atributo DOM y objetos JavaScript.

Con ella se creó una animación muy simple para la página de login a modo de prueba.


\subsection{Desarrollo de la aplicación}

La fase desarrollo de la aplicación fue la que más tiempo llevó, y la que mas actualizaciones en el proyecto supuso. Lo primero que se realizó fue la conexión de Java con MySQL. Se importó en el proyecto el conector java-mysql, que permite realizar consultas en la base de datos desde java y se creo la clase conexión para realizar todas las configuraciones pertinentes a la conexión. Esta misma clase Conexión, es la que termino albergando todos los métodos  que realizan alguna comunicación con la base de datos.

Con ello se creó la página de login, que al ser la primera, sirvió a modo de practica con los lenguajes y herramientas. Después se implemento todo el sistema de mantenimiento de la web, el cual va enfocado solamente al usuario administrador. Se creó un paquete "admin" para contener todas las clases implicadas en estas tareas. 

Se crearon los objetos Area, Centro, Departamento y Usuario para poder almacenar toda la información que se lee de las respectivas tablas de la base de datos. Además se creo una clase enumeración para el Rol. De esta manera el rol pasa a ser una variable estática definida por la aplicación, ya que no interesa que un usuario administrador pueda crear roles.

Con cada página JSP que se crea, se crea también su correspondiente Servlet, de forma que de primeras se creo el servlet del login y de admin.

Una vez terminadas las funcionalidades de administración y mantenimiento,  se pasó a crear el paquete "usuario", que contendría todas las clases pertenecientes a las tablas a las que el usuario puede tener acceso.

Se comenzó por la que denominamos página de gestión, es decir, la página que mostrará todas las entradas y salidas de productos, y que será la primera página que verá el usuario al acceder. Con ella se crearon los objetos java de Ficha, Entrada y Salida, con su correspondiente página JSP y su servlet.

Para el funcionamiento de la página de gestión, también era necesaria la implementación del resto de páginas a las que denominamos auxiliares, que son las que permiten al usuario gestionar datos de la base de datos como son: las calidades, las marcas, los productos, los proveedores y las salidas.

Cada tabla de las anteriores dispone de su propia página JSP y se servlet, ya que el usuario podrá tanto añadir como editar los datos de todas ellas.


\subsection{Cambios y arreglos}

Una vez se obtuvieron prácticamente todas las funcionalidades básicas de la aplicación, se dedico el tiempo a arreglar y perfeccionar cosas que iban quedando en la recámara, como la encriptacion de las contraseñas, o el correcto funcionamiento de los filtros que poseen las páginas. 

Además se realizó una reunión con los usuarios del laboratorio que van a utilizar la aplicación, y se les mostró una preview de lo que iba funcionando hasta el momento. Tras esta reunión se plantearon unos nuevos puntos de vista, que requerían de algún cambio en el funcionamiento del sistema que, se añadieron y pasaron a implementarse.

El cambio más importante a destacar tras esta reunión, es el cambió drástico de la página principal, que pasó de mostrar las entradas por un lado, y las salidas por otro, a mostrar directamente las fichas de producto completas junto con sus existencias actuales.

Este cambio produjo también un cambio importante en la base de datos y en el funcionamiento en general, ya que se paso de tratar a las entradas y salidas de una manera primordial, a centrarse en las fichas y sus existencias. 

Este cambio que fue bastante necesario, ya que se llevaba tiempo planteando, pero al no poder resolver las dudas con el equipo, no se había realizado aún, hasta que finalmente en la reunión se resolvieron las dudas.

\section{Estudio de viabilidad}

En el siguiente apartado se analizarán todos los parámetros que pueden estar involucrados a la hora de estudiar la viabilidad del proyecto que nos ocupa.

\subsection{Viabilidad económica}

En el siguiente apartado se realizará un estudio de la viabilidad económica del proyecto, suponiendo que el proyecto se ha realizado en el mundo laboral y no en el plan de estudios del grado.

\subsubsection{Coste de personal}
Por un lado hay que contar los recursos humanos empleados en el desarrollo de nuestro proyecto, que serían el alumno desarrollador y el tutor.

El alumno ha empleado un total de 17 semanas a jornada completa (40 horas semanales). Suponiendo que el alumno tiene un sueldo mensual bruto de 1200€ , a lo que hay que restarle los gastos de seguridad social \footnote{\url{http://www.seg-social.es/wps/portal/wss/internet/Trabajadores/CotizacionRecaudacionTrabajadores/36537}}:

\begin{itemize}
	\item Desempleo: 1.55\%
	\item Formación Profesional: 0.10\%
	\item Contingencias Comunes: 4.7\%
\end{itemize}

Por lo que si hacemos la cuenta:

\[1200\euro - 1200\euro \times \left (\frac{1.55 + 0.10 + 4.7}{100}\right ) = 1123.8\euro \]

Así que, multiplicando por el número de meses que ha durado el proyecto 4 x 1123.8\euro hace un total de \textbf{4495.2€} con respecto al alumno.

Además del alumno, hay que tener en cuenta el trabajo realizado por parte del tutor. Para ello contaremos con que una hora de trabajo son 50€ brutos la hora incluyendo instalaciones, costes laborales y otros indirectos como gastos generales, equipamiento, espacios, etc.

Teniendo en cuenta que se han realizado entre una y dos reuniones semanales de 45 minutos, otras tres reuniones con la facultad de 45 minutos, y sumando además unas 10 horas extra para revisar documentación, mediación con el decano y consultas procedentes del desarrollador, nos sale un total de:

\[ \left (  \left ( 17\: sem. \times \frac{1.5\, reu.\times 45\, mins}{60} \right )+\left ( 3\, reu. \times \frac{45\, mins}{60} \right ) + 10\right )\times\, 50\euro/h = 1568.75\euro \]


\subsubsection{Coste de hardware}

Para calcular el gasto de hardware, hay que valorar el material utilizado durante el proyecto por el alumno:
\begin{itemize}
	\item Ordenador potátil: 900€
	\item Monitor: 100€
	\item Teclado y ratón: 25€
\end{itemize}

En total tenemos un gasto de 1025€. Según la agencia tributaria este tipo de material tiene una vida útil de 10 años \footnote{\url{https://www.agenciatributaria.es/AEAT.internet/Inicio/_Segmentos_/Empresas_y_profesionales/Empresas/Impuesto_sobre_Sociedades/Periodos_impositivos_a_partir_de_1_1_2015/Base_imponible/Amortizacion/Tabla_de_coeficientes_de_amortizacion_lineal_.shtml}}, y nuestro proyecto ha durado un total de 17 semanas por lo que el coste de amortización sería:

\[\frac{1025\euro}{10\, a\textit{ñ}os} \times \frac{1\, a\textit{ñ}o}{52\, semanas} \times 17\, semanas \approx  34\euro \]

\subsubsection{Coste de software}

Para calcular los gastos de software contamos con que practicamente todos los programas utilizados son de licencia gratuita, a excepción de Adobe Illustrator, por lo que hay que contar con un coste por su licencia de 29.99€ al mes (sin iva). Hay que tener en cuenta que la licencia se paga por mes completo, por lo que se realizará el cálculo sobre 20 semanas en vez de 17.

\[ (29.99 \euro + 21\% \, iva) \times 5\, meses = 181.45 \euro\]

A esto habría que añadirle el coste del Office 365, que eligiendo el paquete "Microsoft 365 Empresa Estándar" nos sale a 10.50€ al mes por usuario (sin iva), pero con una suscripción anual.

\[ ((10.50 \euro + 21\% \, iva) \times 12\, meses) \times 2\, usuarios = 305.04 \euro\]

\subsubsection{Coste total}

Con todos los costes mencionados, podemos ver todos los gastos y su suma total en la tabla~\ref{tabla:costes}

\begin{table}[h]
	\centering
	\caption{Coste total del proyecto}
	\label{tabla:costes}
	\rowcolors {2}{gray!20}{}
	\begin{tabular}{p{6cm} r}
		\toprule
		Costes & Importe \\ \midrule
		Desarrollador			     & 4495.2\euro   						\\
		Tutor  				         & 1568.75\euro							\\
		Hardware				     & 34\euro								\\
		Software 				     & 486.49\euro 							\\
		\textbf{Total} 			     & 6584.44\euro 						\\  
		\bottomrule
	\end{tabular}
\end{table}


\subsection{Viabilidad legal}
 Para la viabilidad legal hay que analizar las librerías que se han utilizado, buscando sus licencias, analizando las compatibilidades y buscando las más restrictiva.
 
En la tabla~\ref{tabla:licencias} se muestra el listado de todas las licencias.

Al ser la licencia \textit{GNU General Public Licence} la más restrictiva, hay que calificar a Geslab 2.0 bajo una licencia \textit{GNU General Public Licence}.

\begin{table}[h]
	\centering
	\caption{Herramientas utilizadas y sus licencias}
	\label{tabla:licencias}
	\rowcolors {2}{gray!20}{}
	\begin{tabular}{p{4cm} p{6cm}}
		\toprule
		Herramienta & Licencia \\ \midrule
		Bootstrap 4				     & MIT   								\\
		Animation.js		         & MIT   								\\
		jQuery				         & MIT   								\\
		Font Awesome			     & MIT 									\\ 
		MySQL Connector				 & GNU General Public Licence			\\ \bottomrule
	\end{tabular}
\end{table}


